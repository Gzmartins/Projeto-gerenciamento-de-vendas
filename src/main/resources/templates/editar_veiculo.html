<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head> 
    <meta charset="utf-8"/>
    <title>Sistema Gerenciador de Vendas (SGV)</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            margin-top: 50px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
        }
        h2 {
            color: #343a40;
        }
        .form-group label {
            font-weight: bold;
        }
        .alert {
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div th:replace="header :: header">...</div>
    <div class="container" style="margin-top: 50px; width: 50%;">
        <h2 class="text-center alert alert-dark">Editar Veículo</h2>
        <form action="#" th:action="@{/veiculo}" th:object="${veiculo}" method="post">
            <input type="hidden" th:field="*{id}" id="id">
            <hr class="mb-4">
            <div class="form-group">
                <label for="modelo">Modelo:</label>
                <input type="text" minlength="1" th:field="*{modelo}" id="modelo" placeholder="Modelo" class="form-control">
                <span th:if="${#fields.hasErrors('modelo')}" th:errors="*{modelo}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label for="portas">Portas:</label>
                <input type="text" th:field="*{portas}" id="portas" placeholder="Portas" class="form-control">
                <span th:if="${#fields.hasErrors('portas')}" th:errors="*{portas}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label for="cor">Cor:</label>
                <input type="text" th:field="*{cor}" id="cor" placeholder="Cor" class="form-control">
                <span th:if="${#fields.hasErrors('cor')}" th:errors="*{cor}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                    <label for="cambio">Câmbio:</label><br>
                    <select id="cambio" name="cambio" class="form-control">
                        <option value="Automático">Automático</option>
                        <option value="manual">Mecânico</option>
                    </select>
                    <span th:if="${#fields.hasErrors('cambio')}" th:errors="*{cambio}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label for="placa">Placa:</label>
                <input type="text" th:field="*{placa}" id="placa" placeholder="Placa" class="form-control">
                <span th:if="${#fields.hasErrors('placa')}" th:errors="*{placa}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label for="chassi">Chassi:</label>
                <input type="text" th:field="*{chassi}" id="chassi" placeholder="Chassi" class="form-control">
                <span th:if="${#fields.hasErrors('chassi')}" th:errors="*{chassi}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label for="anoModelo">Ano Modelo:</label>
                <input type="text" th:field="*{anoModelo}" id="anoModelo" placeholder="Ano Modelo" class="form-control">
                <span th:if="${#fields.hasErrors('anoModelo')}" th:errors="*{anoModelo}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label for="combustivel">Combustível:</label>
                <input type="text" th:field="*{combustivel}" id="combustivel" placeholder="Combustível" class="form-control">
                <span th:if="${#fields.hasErrors('combustivel')}" th:errors="*{combustivel}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label>GNV:</label><br>
                <input type="radio" id="gnv-sim" name="gnv" value="true">
                <label for="gnv-sim">Sim</label>
                <input type="radio" id="gnv-nao" name="gnv" value="false" checked>
                <label for="gnv-nao">Não</label>
                <span th:if="${#fields.hasErrors('gnv')}" th:errors="*{gnv}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label for="opcionais">Opcionais:</label>
                <input type="text" th:field="*{opcionais}" id="opcionais" placeholder="Opcionais" class="form-control">
                <span th:if="${#fields.hasErrors('opcionais')}" th:errors="*{opcionais}" class="alert alert-warning"></span>
            </div>
            <div class="form-group">
                <label>Tabela Fipe:</label><br>
                <input type="radio" id="tab-fipe-sim" name="tabelaFipe" value="true">
                <label for="tab-fipe-sim">Sim</label>
                <input type="radio" id="tab-fipe-nao" name="tabelaFipe" value="false" checked>
                <label for="tab-fipe-nao">Não</label>
                <span th:if="${#fields.hasErrors('tabelaFipe')}" th:errors="*{tabelaFipe}" class="alert alert-warning"></span>
            </div>
                
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label for="nomeDono">Nome do Proprietário: </label>
                        <input type="text" minlength="1" th:field="*{nomeDono}" id="nomeDono" placeholder="Nome do Proprietário:" class="form-control">
                    </div>    
                    <span th:if="${#fields.hasErrors('nomeDono')}" th:errors="*{nomeDono}" class="alert alert-warning"></span>                        
                </div>
                
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label for="vigencia">Vigência:</label>
                        <input type="text" th:field="*{vigencia}" id="vigencia" maxlength="10" placeholder="DD/MM/AAAA" class="form-control"oninput="mascaraData(this)">
                    </div>    
                    <span th:if="${#fields.hasErrors('vigencia')}" th:errors="*{vigencia}" class="alert alert-warning"></span>
                </div>
                    
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label for="cpfDono">CPF do Proprietário:</label>
                        <input type="text" th:field="*{cpfDono}" id="cpfDono" placeholder="000.000.000-00" pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" maxlength="14" class="form-control" oninput="mascaraCPF(this)">
                    </div>    
                    <span th:if="${#fields.hasErrors('cpfDono')}" th:errors="*{cpfDono}" class="alert alert-warning"></span>
                </div>
                
            <div class="form-group">
                <label>Financiado:</label><br>
                <input type="radio" id="financiado-sim" name="financiado" value="true">
                <label for="financiado-sim">Sim</label>
                <input type="radio" id="financiado-nao" name="financiado" value="false" checked>
                <label for="financiado-nao">Não</label>
            </div>
                
            <div class="form-group">
                <label for="financeira">Financeira:</label>
                <input type="text" th:field="*{financeira}" id="financeira" placeholder="Financeira" class="form-control">
                <span th:if="${#fields.hasErrors('financeira')}" th:errors="*{financeira}" class="alert alert-warning"></span>
            </div>
                
            <div class="form-group">
                <label for="danosMateriais">Danos Materiais/Corporais:</label>
                <input type="text" th:field="*{danosMateriais}" id="danosMateriais" placeholder="Danos Materiais" class="form-control">
                <span th:if="${#fields.hasErrors('danosMateriais')}" th:errors="*{danosMateriais}" class="alert alert-warning"></span>
            </div>
                
            <div class="form-group">
                <label for="franquia">Franquia:</label>
                <input type="text" th:field="*{franquia}" id="franquia" placeholder="Franquia" class="form-control">
                <span th:if="${#fields.hasErrors('franquia')}" th:errors="*{franquia}" class="alert alert-warning"></span>
            </div>
                
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Salvar</button>
                <a href="/veiculo" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
    </div>
    <script>
        function mascaraCPF(campo) {
            let valor = campo.value;
            valor = valor.replace(/\D/g, '');

            if (valor.length > 3 && valor.length <= 6) {
                valor = valor.replace(/(\d{3})(\d+)/, '$1.$2');
            } else if (valor.length > 6 && valor.length <= 9) {
                valor = valor.replace(/(\d{3})(\d{3})(\d+)/, '$1.$2.$3');
            } else if (valor.length > 9) {
                valor = valor.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
            }

            campo.value = valor;
        }
        function mascaraData(campo) {
            let valor = campo.value;
            valor = valor.replace(/\D/g, '');

            if (valor.length > 2 && valor.length <= 4) {
                valor = valor.replace(/(\d{2})(\d+)/, '$1/$2');
            } else if (valor.length > 4) {
                valor = valor.replace(/(\d{2})(\d{2})(\d+)/, '$1/$2/$3');
            }

            campo.value = valor;
        }
    </script>
</body>
</html>
